{% extends 'navbar/navbar.html' %}
{% load crispy_forms_tags %}
{% load django_bootstrap5 %}
{% load icon %}
{% bootstrap_css %}
{% bootstrap_javascript %}

<style>
.fade-out {
    opacity: 0;
    transition: opacity 0.5s ease-out;
</style>


{% block title %}Cadastro - Aegis Share{% endblock %}

{% block page_content %}

<div class="auth-container">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-6 col-lg-4">
                <div class="auth-card p-4">
                    <div class="text-center mb-4">
                        <h3 class="fw-bold">CADASTRAR</h3>
                        <p class="text-muted">Crie uma conta</p>
                    </div>
                    
                    <div id="message-container">
                       {% if messages %}
                           {% for message in messages %}
                               <div class="alert alert-{{ message.tags }}" role="alert">
                                   {{ message }}
                               </div>
                           {% endfor %}
                       {% endif %}
                   </div>

                    <form method="post">
                        {% csrf_token %}
                        
                        {{ form|crispy }} 

                        <div class="d-grid mb-3 mt-4">
                            <button type="submit" class="btn btn-primary btn-lg">
                                {% icon "plus" style="width: 20px; height: 20px;" %} Cadastrar
                            </button>
                        </div>

                    </form>


                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> 

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>

<script>
    $(document).ready(function(){
        $('#id_cpf').mask('000.000.000-00', {
            reverse: false,
            translation: {
                '0': {pattern: /\d/} 
            }
        });

    });
</script>

<script>

    const messageContainer = document.getElementById('message-container');
    const tempoParaDesaparecer = 2500;

    if (messageContainer) {
        setTimeout(() => {
            messageContainer.classList.add('fade-out'); 
        }, tempoParaDesaparecer);
        
        setTimeout(() => {
            messageContainer.style.display = 'none';
        }, tempoParaDesaparecer + 500);
    }
</script>


{% endblock scripts %}